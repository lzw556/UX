<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>5 Selectors</title>
    <link href="/CSS/base.css" rel="stylesheet">
</head>
<body>
    <div class="navbar">
        <p><a href="syndata.html">previous</a>&nbsp;&nbsp;&nbsp;<a href="cascade.html">next</a>&nbsp;&nbsp;&nbsp;<a href="index.html">index</a></p>
    </div>
    <hr>
    <h1>5 Selectors</h1>
    <p><strong>Contents</strong></p>
    <ul class="table-of-content">
        <li><a href="#pattern-matching">5.1 Pattern matching</a></li>
        <li>
            <a href="#selector-syntax">5.2 Selector syntax</a>
            <ul class="table-of-content">
                <li><a href="#selector-syntax-grouping">5.2.1 Grouping</a></li>
            </ul>
        </li>
        <li><a href="#universal-selector">5.3 Universal selector</a></li>
        <li><a href="#type-selector">5.4 Type selectors</a></li>
        <li><a href="#attribute-selector">5.5 Attribute selectors</a>
            <ul class="table-of-content">
                <li><a href="#class-selector">5.5.1 Class selectors</a></li>
            </ul>
        </li>
        <li><a href="#id-selector">5.6 ID selectors</a></li>
        <li><a href="#pseudo-selector">5.7 Pseudo-elements and pseudo-classes</a></li>
        <li>
            <a href="#pseudo-element-selector">5.8 Pseudo-elements</a>
            <ul class="table-of-content">
                <li><a href="#first-line-selector">5.8.1 :first-line pseudo-element</a></li>
                <li><a href="#first-letter-selector">5.8.2 :first-letter pseudo-element</a></li>
                <li><a href="#before-selector">5.8.3 :before and :after pseudo-elements</a></li>
            </ul>
        </li>
        <li>
            <a href="#pseudo-class-selector">5.9 Pseudo-classes</a>
            <ul class="table-of-content">
                <li><a href="#first-child-selector">5.9.1 :first-child pseudo-class</a></li>
                <li><a href="#link-pseudo-class-selector">5.9.2 link pseudo-classes: :link and :visited</a></li>
                <li><a href="#dynamic-pseudo-class-selector">5.9.3 dynamic pseudo-classes: :hover,:active and :focus</a></li>
                <li><a href="#link-pseudo-class-order">5.9.4 link pseudo-classes order</a></li>
                <li><a href="#lang-pseudo-class-selector">5.9.5 language pseudo-class: :lang</a></li>
                <li><a href="#privacy-visited">5.9.6 privacy and :visited</a></li>
            </ul>
        </li>
        <li><a href="#descendant-selector">5.10 Descendant selectors</a></li>
        <li><a href="#child-selector">5.11 Child selectors</a></li>
        <li><a href="#adjacent-sibling-selector">5.12 Adjacent sibling selectors</a></li>
    </ul>
    <h2><a name="pattern-matching">5.1 Pattern matching</a></h2>
    <p>在CSS中,pattern matching(模式匹配)rules决定哪些样式应用于元素.这些pattern,叫作selector,从简单的元素名到丰富的上下文模式</p>
    <p>在selector中元素名的case-sensitivity(大小写敏感性)取决于document language.例如,HTML中,元素名是case-insensitive(大小写不敏感的),但在XML中是大小写敏感的</p>
    <h2><a name="selector-syntax">5.2 Selector syntax</a></h2>
    <p>simple selector:</p>
    <ul>
        <li>要么是后面跟着0或多个任意顺序的attribute selector(class selector),ID selector,pseudo-class的type selector,例如:
            <ul>
                <li>p{...}</li>
                <li>p[class]{...}</li>
                <li>p[class][name="desc"]{...}</li>
                <li>p.note{...}</li>
                <li>p.note.warning{...}</li>
                <li>p.note.warning[name="desc"]{...}</li>
                <li>p#p1{...}</li>
            </ul>
        </li>
        <li>要么是后面跟着0或多个任意顺序的attribute selector(class selector),ID selector,pseudo-class的universal selector,例如:
            <ul>
                <li>*{...}</li>
                <li>*[class]{...}</li>
                <li>*[class][name="desc"]{...}</li>
                <li>*.note{...}</li>
                <li>*.note.warning{...}</li>
                <li>*.note.warning[name="desc"]{...}</li>
                <li>*#p1{...}</li>
            </ul>
        </li>
    </ul>
    <p class="note">自己总结:simple selector就是不含combinators的selector</p>
    <a href="Test/sec05-02.html" target="blank" class="demo">demo</a>
    <p>selector是一串用连接符分隔的一个或多个简单selector.连接符是:white space,&gt;,+</p>
    <p>selector匹配到的元素叫作selector对象.一个selector的对象总是最后一个简单selector匹配的元素的子集</p>
    <h3><a name="selector-syntax-grouping">5.2.1 Grouping(selector分组)</a></h3>
    <p>当几个selector share相同的声明时,他们可以被放进一个以逗号分隔的列表中</p>
    <a href="Test/sec05-02-01.html" target="blank" class="demo">demo</a>
    <h2><a name="universal-selector">5.3 Universal selector</a></h2>
    <p>*,可以匹配任意单一元素.如果在一个simple selector中除了*之外还有别的字符,那么*可以忽略.例如,*#myid和#myid等价,*.note和.note等价,*[href]和[href]等价</p>
    <a href="Test/sec05-03.html" target="blank" class="demo">demo</a>
    <h2><a name="type-selector">5.4 Type selectors</a></h2>
    <p>一个type selector可以匹配文档树中该元素类型的所有实例</p>
    <a href="Test/sec05-04.html" target="blank" class="demo">demo</a>
    <h2><a name="attribute-selector">5.5 Attribute selectors</a></h2>
    <dl>
        <dt>[att]</dt>
        <dd>匹配设置了'att'属性的元素,无论'att'的值是什么</dd>
        <dt>[att=val]</dt>
        <dd>匹配设置了'att'属性且'att'的值等于'val'的元素</dd>
        <dt>[att~=val]</dt>
        <dd>匹配设置了'att'属性且'att'的值是一个以white space分隔的值列表,其中之一是'val'的元素</dd>
        <dt>[att|=val]</dt>
        <dd>匹配设置了'att'属性的元素且'att'的值等于val,or 'att'的值以val-为前缀的元素</dd>
    </dl>
    <a href="Test/sec05-05.html" target="blank" class="demo">demo</a>
    <h3><a name="class-selector">5.5.1 Class selectors</a></h3>
    <p>
        在[att~=val]中,如果'att'是class,则[class~=val]可以用.val替代,因此class selector本质上还是attribute selector,从<a href="cascade.html#selector-specificity">selector-specificity</a>中可以得知,这2种selector的specificity都是(=c)
    </p>
    <p>由上可知,.val匹配设置了class属性且class的值是一个以white space分隔的值列表,其中之一是val的元素</p>
    <div class="example">
        <pre>p.warning.note{...}   /*这个selector匹配class="warning card note",不匹配class="note card"*/</pre>
    </div>
    <a href="Test/sec05-05-01.html" target="blank" class="demo">demo</a>
    <h2><a name="id-selector">5.6 ID selectors</a></h2>
    <p>#val,匹配ID属性值等于'val'的元素</p>
    <p>ID selector比attribute selector的特殊性更高.例如,#val比[id=val]的specificity更高,详见<a href="cascade.html#selector-specificity">selector-specificity</a></p>
    <a href="Test/sec05-06.html" target="blank" class="demo">demo</a>
    <h2><a name="pseudo-selector">5.7 Pseudo-elements and pseudo-classes</a></h2>
    <p>在CSS2.1中,样式通常是根据元素在document tree中的位置来添加的.但在有些常见的排版场景下可能无法根据document tree的结构来添加样式.例如,HTML4,没有元素对应的是一个段落的第一行,所以简单CSS selector无法引用它</p>
    <p>为了允许根据document tree之外的信息来格式化，CSS引入了pseudo-elements和pseudo-classes的概念</p>
    <ol>
        <li>pseudo-elements,主要用来给一个元素的特定部分指定样式</li>
        <li>pseudo-classes,主要用来给一个元素的特定状态指定样式</li>
    </ol>
    <p>
        pseudo-element和pseudo-class都不会出现在源文档中<br>
        pseudo-class可以出现在selector的任何位置,pseudo-element只能出现在selector中最后一个简单selector的后面<br>
        pseudo-element名和pseudo-class名都是case-insensitive
    </p>
    <h2><a name="pseudo-element-selector">5.8 Pseudo-elements</a></h2>
    <p>:first-line, :first-letter, :before, :after</p>
    <h3><a name="first-line-selector">5.8.1 :first-line pseudo-element</a></h3>
    <p>:first-line对一个<a href="vfmmodel.html#block-container-box">block container element</a>中的第一行应用样式.第一行的长度取决于很多因素:包括元素width,文档width,font-size等. :first-line不会匹配任何真正的HTML元素</p>
    <p>可以用在:first-line selector中的CSS属性有:font,color,background,'word-spacing','letter-spacing','text-decoration','text-transform'和'line-height'</p>
    <a href="Test/sec05-08-01.html" target="blank" class="demo">demo</a>
    <p>:first-line可能会被UA重写成含有虚拟标签序列的形式</p>
    <div class="example">
        <pre>&lt;p&gt;This is first line.<br>This is second line&lt;/p&gt;</pre>
        <pre>&lt;p&gt;&lt;p:first-line&gt;This is first line.&lt;/p:first-line&gt;<br>This is second line&lt;/p&gt;</pre>
    </div>
    <p>如果pseudo-element把一个真实元素拆开了,真实元素会被虚拟标签分隔为2个元素</p>
    <div class="example">
        <pre>&lt;p&gt;&lt;span class="test"&gt;This is first line.<br>This is&lt;/span&gt; second line&lt;/p&gt;</pre>
        <pre>&lt;p&gt;&lt;p:first-line&gt;&lt;span class="test"&gt;This is first line.&lt;/span&gt;&lt;/p:first-line&gt;<br>&lt;span class="test"&gt;This is&lt;/span&gt; second line&lt;/p&gt;</pre>
    </div>
    <p>
        :first-line的虚拟标签序列必须嵌套在最内层的闭合块级元素中(即虚拟标签的开始标签是在最内层块级元素开始标签之后),比如:
    </p>
    <div class="example">
        <pre>&lt;div&gt;<br>  &lt;p&gt;first paragraph&lt;/p&gt;<br>  &lt;p&gt;second paragraph&lt;/p&gt;<br>&lt;/div&gt;</pre>
        <pre>&lt;div&gt;<br>  &lt;p&gt;&lt;div:first-line&gt;&lt;p:first-line&gt;first paragraph&lt;/p:first-line&gt;&lt;/div:first-line&gt;&lt;/p&gt;<br>  &lt;p&gt;&lt;p:first-line&gt;second paragraph&lt;/p:first-line&gt;&lt;/p&gt;<br>&lt;/div&gt;</pre>
    </div>  
    <h3><a name="first-letter-selector">5.8.2 :first-letter pseudo-element</a></h3>
    <p>
        :first-letter对一个<a href="vfmmodel.html#block-container-box">block container element</a>中第一行中的第一个字母应用样式,如果这一行中在他前面没有其他内容(比如image)的话
    </p>
    <p>可以用在:first-letter selector中的CSS属性有:font,color,background,'word-spacing','letter-spacing','text-decoration','text-transform','line-height',margin,padding,border,'vertical-align'</p>
    <a href="Test/sec05-08-02.html" target="blank" class="demo">demo</a>
    <p>:first-letter的虚拟标签紧挨着内容,比如:</p>
    <div class="example">
        <pre>&lt;p&gt;&lt;span&gt;The first&lt;/span&gt; few words of an article<br> in the Economist.&lt;p&gt;</pre>
        <pre>&lt;p&gt;&lt;span&gt;&lt;p:first-letter&gt;T&lt;/p:first-letter&gt;he first&lt;/span&gt; few words of an article<br> in the Economist.&lt;p&gt;</pre>
    </div>
    <p>
        因此:<br>
    <code>p span{color:red!important}<br>p:first-letter{color:blue;}</code>
    中,字母T的color是blue.因为:first-letter虚拟标签是span的子元素,所以T的color的computed value等于specified value(即blue)</p>
    <p>:first-letter在:first-line里面,如下:</p>
    <div class="example">
        <pre>&lt;p&gt;Some text that ends up<br> on two lines&lt;/p&gt;</pre>
        <pre>&lt;p&gt;&lt;p:first-line&gt;&lt;p:fist-letter&gt;S&lt;/p:fist-letter&gt;ome text that ends up&lt;/p:first-line&gt;<br> on two lines&lt;/p&gt;</pre>
    </div>
    <h3><a name="before-selector">5.8.3 :before and :after pseudo-elements</a></h3>
    <p>
        :before用来在一个元素的内容之前插入生成内容;:after用来在一个元素的内容之后插入生成内容.详见<a href="generate.html#before-after-pseudo">before-after-pseudo</a>
    </p>
    <p>
        当:first-line pseudo-element和:first-letter pseudo-element被应用于含有生成内容(使用:before或:after)的元素,他们应用于包括生成内容在内的firse-line和first-letter
    </p>
    <div class="example">
        <pre>p.special:before{content:"helloworld"}<br>p.special:first-letter{color:red;}</pre>
        <p>helloworld中的h的color将变成red.</p>
    </div>
    <a href="Test/sec05-08-03.html" target="blank" class="demo">demo</a>
    <h2><a name="pseudo-class-selector">5.9 Pseudo-classes</a></h2>
    <h3><a name="first-child-selector">5.9.1 :first-child pseudo-class</a></h3>
    <p>
        :first-child匹配一个元素,这个元素是其他元素的第一个子元素
    </p>
    <p class="note">注意:计算第一个子元素时不考虑匿名元素</p>
    <a href="Test/sec05-09-01.html" target="blank" class="demo">demo</a>
    <h3><a name="link-pseudo-class-selector">5.9.2 link pseudo-classes: :link and :visited</a></h3>
    <p>
        :link匹配没有被访问过的链接<br>
        :visited匹配曾经被访问过的链接
    </p>
    <p class="note">
        <strong>注意</strong> :link和:visited只能应用于链接(a标签且href属性值不为空,所以匹配不到锚点)<br>
        2种状态互斥.即一个链接不可能同时被这2种状态匹配到,因此其书写的先后顺序对结果无影响
    </p>
    <a href="Test/sec05-09-02.html" target="blank" class="demo">demo</a>
    <h3><a name="dynamic-pseudo-class-selector">5.9.3 dynamic pseudo-classes: :hover,:active and :focus</a></h3>
    <p>
        :hover匹配一个元素,当这个元素被用户使用定点设备虚指但不激活期间.比如当用户把光标(鼠标指针)悬停在元素生成的元素框上期间<br>
        :active匹配一个元素,当这个元素被用户激活期间,比如,在用户按下鼠标到松开鼠标这段时间<br>
        :focus匹配一个元素,当这个元素拥有焦点期间
    </p>
    <p>dynamic pseudo-classes可以应用于任何元素</p>
    <a href="Test/sec05-09-03.html" target="blank" class="demo">demo</a>
    <h3><a name="link-pseudo-class-order">5.9.4 link pseudo-classes order</a></h3>
    <p>
        一个元素在同一时间可能匹配多个伪类.例如,:active发生期间:hover一直都在发生.所以对一个链接来说,伪类声明顺序非常重要,正确的链接伪类的声明顺序是: :link/:visited ->:hover ->:active
    </p>
    <a href="Test/sec05-09-04.html" target="blank" class="demo">demo</a>
    <h3><a name="lang-pseudo-class-selector">5.9.5 language pseudo-class: :lang</a></h3>
    <h3><a name="privacy-visited">5.9.6 privacy and :visited</a></h3>
    <p>这一段落不是规范中的内容</p>
    <p>在大概2010年前, :visited selector被网站用来检测用户的浏览记录,并找出用户都访问过哪些网站.这些可以通过 window.getComputedStyle 和其他技术实现.为了解决这个问题,Gecko 2(Firefox引擎) 实现了一项隐私方面的更新,限制网站可以从访问过的链接中获得的信息</p>
    <ol>
        <li>little white lie(善意的谎言),为了保护用户隐私,火狐和其他浏览器会在特定情况下向网站应用撒谎:
            <ul>
                <li>window.getComputedStyle 方法总是将所有链接都看待为"未访问过"的</li>
                <li>使用形如 :visited + span 的兄弟选择器时,指定的元素(本例中的 span)总是会按照链接未访问过显示</li>
            </ul>
        </li>
        <li>对已访问链接样式的限制,只有下列属性才能被应用到已访问链接:
            <ul>
                <li>color</li>
                <li>background-color</li>
                <li>border-color</li>
                <li>outline-color</li>
            </ul>
            <p>即便是上述样式,你也不能给访问过和未访问过设置不同的透明度</p>
        </li>
    </ol>
    <a href="Test/sec05-09-06.html" target="blank" class="demo">demo</a>
    <p>有关隐私和:visited selector的更多信息详见MDN中的<a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Privacy_and_the_:visited_selector">Privacy and the :visited selector</a></p>
    <div class="example">
        <pre>:link {<br>  outline:dotted 1px blue;<br>  background-color:white;    /*必须指定一个值,否则无法对:visited进行修改*/<br>}</pre>
        <pre>:visited {<br>  outline-color:orange;<br>  background-color:green;<br>  color:yellow;<br>}</pre>
    </div>
    <h2><a name="descendant-selector">5.10 Descendant selectors</a></h2>
    <p>
        后代selector匹配一个元素,这个元素是另一个元素的后代元素;后代selector由2个或多个以white space分隔的selector组成
    </p>
    <a href="Test/sec05-10.html" target="blank" class="demo">demo</a>
    <h2><a name="child-selector">5.11 Child selectors</a></h2>
    <p>
        子selector匹配一个元素,这个元素是另一个元素的子元素;子selector由2个或多个以 > 分隔的selector组成
    </p>
    <a href="Test/sec05-11.html" target="blank" class="demo">demo</a>
    <h2><a name="adjacent-sibling-selector">5.12 Adjacent sibling selectors</a></h2>
    <p>
        相邻兄弟selector语法:E1 + E2,E2是selector对象,如果E1和E2拥有相同的父元素并且E1紧挨在E2前面(E1和E2之间无其他元素节点,忽略非元素节点比如文本或注释),则成功匹配到E2
    </p>
    <a href="Test/sec05-12.html" target="blank" class="demo">demo</a>
    <hr>
    <div class="navbar">
        <p><a href="syndata.html">previous</a>&nbsp;&nbsp;&nbsp;<a href="cascade.html">next</a>&nbsp;&nbsp;&nbsp;<a href="index.html">index</a></p>
    </div>
</body>
</html>